<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>測驗首頁</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">    


<script
  src="https://code.jquery.com/jquery-2.2.4.min.js"
  integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
  crossorigin="anonymous"></script>
 
<script
  src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
  integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
  crossorigin="anonymous"></script>     

    <!-- 最新編譯和最佳化的 CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
	<!-- 選擇性佈景主題 -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">
	<!-- 最新編譯和最佳化的 JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>

<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>

</head>
<style type="text/css">
	.panel-title-font-size {
		font-size: 25px;
	}
</style>
<body>

<div style="font-size: 30px; text-align:center;">質性描述產生器  Demo</div>
<br><br>

<div class="row">
	<div class="col-md-1"></div>
	<div class="col-md-8">

		<div class="panel panel-primary">
		  <div class="panel-heading">
		    <h3 class="panel-title panel-title-font-size">幻聽、幻覺</h3>
		  </div>
		  <div class="panel-body">
		  	<button type="button" class="btn btn-default btn-lg">有</button>
		  </div>
		</div>

<br>

		<div class="panel panel-success">
		  <div class="panel-heading">
		    <h3 class="panel-title panel-title-font-size">妄想</h3>
		  </div>
		  <div class="panel-body">
		  	<button type="button" class="btn btn-default">情愛型</button>
		  	<button type="button" class="btn btn-default">誇大型</button>
		  	<button type="button" class="btn btn-default">嫉妒型</button>
		  	<button type="button" class="btn btn-default">被害型</button>
		  	<button type="button" class="btn btn-default">身體型</button>
		  </div>
		</div>

<br>		
	
		<div class="panel panel-danger">
		  <div class="panel-heading">
		    <h3 class="panel-title panel-title-font-size">思考型式障礙/語言</h3>
		  </div>
		  <div class="panel-body">
		  	<button type="button" class="btn btn-default btn-lg">語速快</button>
		  	<button type="button" class="btn btn-default btn-lg">話量多</button>
		  	<button type="button" class="btn btn-default btn-lg">話量少</button>
		  	<button type="button" class="btn btn-default btn-lg">思考邏輯鬆散</button>
		  	<button type="button" class="btn btn-default btn-lg">言談經常離題</button>
		  	<button type="button" class="btn btn-default btn-lg">言談失序</button>
		  	<button type="button" class="btn btn-default btn-lg">前後不連貫</button>
		  	<button type="button" class="btn btn-default btn-lg">回應無法切題</button>
		  	<button type="button" class="btn btn-default btn-lg">思考缺乏現實感</button>
		  	<button type="button" class="btn btn-default btn-lg">胡言亂語</button>
		  </div>
		</div>

<br>

		<div class="panel panel-info">
		  <div class="panel-heading">
		    <h3 class="panel-title panel-title-font-size">情緒障礙</h3>
		  </div>
		  <div class="panel-body">
		  	<button type="button" class="btn btn-default btn-lg">情緒起伏不定</button>
		  	<button type="button" class="btn btn-default btn-lg">情緒反應過度誇張</button>
		  	<button type="button" class="btn btn-default btn-lg">情緒反應減弱</button>
		  	<button type="button" class="btn btn-default btn-lg">易暴躁</button>
		  	<button type="button" class="btn btn-default btn-lg">易焦慮</button>
		  	<button type="button" class="btn btn-default btn-lg">具攻擊性</button>
		  	<button type="button" class="btn btn-default btn-lg">易與他人起衝突</button>
		  </div>
		</div>

<br>

		<div class="panel panel-warning">
		  <div class="panel-heading">
		    <h3 class="panel-title panel-title-font-size">行為障礙</h3>
		  </div>
		  <div class="panel-body">
		  	<button type="button" class="btn btn-default btn-lg">行為混亂缺乏條理</button>
		  	<button type="button" class="btn btn-default btn-lg">自笑</button>
		  	<button type="button" class="btn btn-default btn-lg">自言自語</button>
		  	<button type="button" class="btn btn-default btn-lg">怪異行為</button>
		  	<button type="button" class="btn btn-default btn-lg">睡眠障礙</button>
		  	<button type="button" class="btn btn-default btn-lg">自殺傾向</button>
<!-- 				<input type="button" class="btn btn-default btn-lg" value="111"> -->
<!-- 				<input type="button" class="btn btn-default btn-lg" value="222"> -->
		  </div>
		</div>

	</div>
	
	
	

	<div class="col-md-3">		
<!-- 		<input style="width:20px;" type="checkbox" checked data-toggle="toggle" data-on="行為混亂缺乏條理" data-off="行為混亂缺乏條理" data-onstyle="success" data-offstyle="default"> -->
		
		<div class="form-group" style="width:90%">
	      <label>具體描述</label>
	      <button id="generate" type="button" class="btn btn-default">產生暫存描述</button>
	      <button id="reset" type="button"  onclick="javascript:window.location.reload();" class="btn btn-default">重設</button>
	      <button id ="sendBtn" type="button" style="float:right;" onclick="showModal()" class="btn btn-info hide" data-toggle="modal" data-target="#myModal">確定送出</button>
	      <textarea id="final" class="form-control" rows="8" value="" style="border-color: blue;"></textarea>
	      
	    </div>
    </div>
</div>


<!-- Trigger the modal with a button -->


<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">病歷簡述</h4>
      </div>
      <div class="modal-body" style="font-size: 30px;">
        <p></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>




</body>
<script>

function showModal()
{
   //you can do anything with data, or pass more data to this function. i set this data to modal header for example
   $("#myModal .modal-body").html($('#final').val())
//    $("#myModal").modal();
}

$(document).ready(function(){
	
	$('.panel-primary').find('button').on('click', function() {
		$( this ).toggleClass( "btn-default btn-primary" );
	})
	
	$('.panel-success').find('button').on('click', function() {
		$( this ).toggleClass( "btn-default btn-success" );
	})
	
	$('.panel-danger').find('button').on('click', function() {
		$( this ).toggleClass( "btn-default btn-danger" );
	})

	$('.panel-info').find('button').on('click', function() {
		$( this ).toggleClass( "btn-default btn-info" );
	})	

	$('.panel-warning').find('button').on('click', function() {
		$( this ).toggleClass( "btn-default btn-warning" );
	})
	
	
	
	
	$('#generate').on('click', function(){
		var name = "個案";
		if ((Math.random() < 0.33)) {
			name = "病患";
		} else if ((Math.random() > 0.66)) {
			name = "患者"
		}
		
		var initStr = name + "具有嚴重的正性症狀，包含 : ";
		
		var finalResult = '';
		var resultArray = [];
		
		// step 1  幻聽、幻覺
		var selectedStep1 = $('.panel-primary').find('.btn-primary');
		var selectedStep1Str = "";
		
		if (selectedStep1.length > 0) {
			selectedStep1Str = "有患聽、幻覺。";
			
// 			resultArray.push(selectedStep1Str);
		}
		//===========================================================

			
		// step 2 妄想
		var selectedStep2 = $('.panel-success').find('.btn-success');
		var selectedStep2Str = "";
		
		var selectedStep2Num = selectedStep2.length;
		
		var selectedStep2Array = [];
		selectedStep2.each(function( index ) {
			console.log( index + ": " + $( this ).text() );
			  
			selectedStep2Array.push($( this ).text());
		});
		
		console.log("selectedStep2Array");
		console.log(selectedStep2Array);
		
		if (selectedStep2Num < 0) {
			//donothing
		} else if (selectedStep2Num == 1) {
			
			selectedStep2Str = selectedStep2Array[0].split("型").join("妄想");
			
		} else if (selectedStep2Num == 2) {
			
			selectedStep2Str = selectedStep2Array[0].split("型").join("妄想") 
			+ ((Math.random() > 0.5) ? "以及" : "與") 
			+ selectedStep2Array[1].split("型").join("妄想")

		} else if (selectedStep2Num > 2) {
			
			for (i = 0; i < selectedStep2Array.length; i++) {
				console.log("i = " + i);
				if (i < selectedStep2Array.length -2) {
					selectedStep2Str += selectedStep2Array[i].split("型").join("妄想") + "、";
				} else if (i == selectedStep2Array.length -2) {
					selectedStep2Str += selectedStep2Array[i].split("型").join("妄想") + ((Math.random() > 0.5) ? "以及" : "與");
				} else {
					selectedStep2Str += selectedStep2Array[i].split("型").join("妄想");
				}
				
			}
			
		}
		
		console.log("step2 : " + selectedStep2Str);
		
		if (selectedStep2Num > 0) {
			resultArray.push(selectedStep2Str);
		}
		
		//===========================================================

			
		// step 3 思考型式障礙/語言
		var selectedStep3 = $('.panel-danger').find('.btn-danger');
		var selectedStep3Str = "";
		
		var selectedStep3Num = selectedStep3.length;
		
		var selectedStep3Array = [];
		selectedStep3.each(function( index ) {
			console.log( index + ": " + $( this ).text() );
			  
			selectedStep3Array.push($( this ).text());
		});
		
		console.log("selectedStep3Array");
		console.log(selectedStep3Array);
		
		if (selectedStep3Num < 0) {
			//donothing
		} else if (selectedStep3Num == 1) {
			
			selectedStep3Str = selectedStep3Array[0];
			
		} else if (selectedStep3Num == 2) {
			
			selectedStep3Str = selectedStep3Array[0] 
			+ ((Math.random() > 0.5) ? "以及" : "與") 
			+ selectedStep3Array[1];

		} else if (selectedStep3Num > 2) {
			
			for (i = 0; i < selectedStep3Array.length; i++) {
				console.log("i = " + i);
				if (i < selectedStep3Array.length -2) {
					selectedStep3Str += selectedStep3Array[i] + "、";
				} else if (i == selectedStep3Array.length -2) {
					selectedStep3Str += selectedStep3Array[i] + ((Math.random() > 0.5) ? "以及" : "與");
				} else {
					selectedStep3Str += selectedStep3Array[i];
				}
				
			}
			
		}
		
		console.log("step3 : " + selectedStep3Str);
		
		
		if (selectedStep3Num > 0) {
			resultArray.push("思考/語言障礙（" + selectedStep3Str + "）");
		}
		
		//===========================================================
			
			
		// step 4 情緒障礙
		var selectedStep4 = $('.panel-info').find('.btn-info');
		var selectedStep4Str = "";
		
		var selectedStep4Num = selectedStep4.length;
		
		var selectedStep4Array = [];
		selectedStep4.each(function( index ) {
			console.log( index + ": " + $( this ).text() );
			  
			selectedStep4Array.push($( this ).text());
		});
		
		console.log("selectedStep4Array");
		console.log(selectedStep4Array);
		
		if (selectedStep4Num < 0) {
			//donothing
		} else if (selectedStep4Num == 1) {
			
			selectedStep4Str = selectedStep4Array[0];
			
		} else if (selectedStep4Num == 2) {
			
			selectedStep4Str = selectedStep4Array[0] 
			+ ((Math.random() > 0.5) ? "以及" : "與") 
			+ selectedStep4Array[1];

		} else if (selectedStep4Num > 2) {
			
			for (i = 0; i < selectedStep4Array.length; i++) {
				console.log("i = " + i);
				if (i < selectedStep4Array.length -2) {
					selectedStep4Str += selectedStep4Array[i] + "、";
				} else if (i == selectedStep4Array.length -2) {
					selectedStep4Str += selectedStep4Array[i] + ((Math.random() > 0.5) ? "以及" : "與");
				} else {
					selectedStep4Str += selectedStep4Array[i];
				}
				
			}
			
		}
		
		console.log("step4 : " + selectedStep4Str);		
		
		
		if (selectedStep4Num > 0) {
			resultArray.push("情緒障礙（" + selectedStep4Str + "）");
		}
		
		//===========================================================
			
			
		// step 5 行為障礙
		var selectedStep5 = $('.panel-warning').find('.btn-warning');
		var selectedStep5Str = "";
		
		var selectedStep5Num = selectedStep5.length;
		
		var selectedStep5Array = [];
		selectedStep5.each(function( index ) {
			console.log( index + ": " + $( this ).text() );
			  
			selectedStep5Array.push($( this ).text());
		});
		
		console.log("selectedStep5Array");
		console.log(selectedStep5Array);
		
		if (selectedStep5Num < 0) {
			//donothing
		} else if (selectedStep5Num == 1) {
			
			selectedStep5Str = selectedStep5Array[0];
			
		} else if (selectedStep5Num == 2) {
			
			selectedStep5Str = selectedStep5Array[0] 
			+ ((Math.random() > 0.5) ? "以及" : "與") 
			+ selectedStep5Array[1];

		} else if (selectedStep5Num > 2) {
			
			for (i = 0; i < selectedStep5Array.length; i++) {
				console.log("i = " + i);
				if (i < selectedStep5Array.length -2) {
					selectedStep5Str += selectedStep5Array[i] + "、";
				} else if (i == selectedStep5Array.length -2) {
					selectedStep5Str += selectedStep5Array[i] + ((Math.random() > 0.5) ? "以及" : "與");
				} else {
					selectedStep5Str += selectedStep5Array[i];
				}
				
			}
			
		}
		
		console.log("step5 : " + selectedStep5Str);		
		
		if (selectedStep5Num > 0) {
			resultArray.push("行為障礙（" + selectedStep5Str + "）");
		}
	
		
		//===========================================================
		
			
		// 產生結果
		var resultArrayNum = resultArray.length;
		if (resultArrayNum == 0) {
			finalResult = '';
		} else if (resultArrayNum == 1) {
			finalResult = resultArray[0];
		} else if (resultArrayNum == 2) {
			finalResult = resultArray[0] + "以及" + resultArray[1];
		} else if (resultArrayNum > 2) {
			for (i = 0; i < resultArray.length; i++) {
				if (i < resultArray.length -2) {
					finalResult += resultArray[i] + "、";
				} else if (i == resultArray.length -2) {
					finalResult += resultArray[i] + "，以及";
				} else {
					finalResult += resultArray[i];
				}
				
			}
		}
		
		if(selectedStep1Str !='' || resultArrayNum >0) {
			$('#final').val(initStr + selectedStep1Str + finalResult);
			
			$('#sendBtn').attr('class','btn btn-info');
		} else {
			alert("請點選相關描述!");
		}
		
	})


});
</script>
</html>